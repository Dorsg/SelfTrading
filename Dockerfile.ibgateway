# Dockerfile.ibgateway
FROM datawookie/ib-gateway:1026.1h

USER root

# install Xvfb via Debian apt (the base image is Debianâ€‘based)
RUN apt-get update \
 && DEBIAN_FRONTEND=noninteractive apt-get install -y xvfb \
 && rm -rf /var/lib/apt/lists/*

# copy in our custom entrypoint (see next step)
COPY entrypoint_ibgateway.sh /entrypoint.sh
RUN chmod +x /entrypoint.sh

# docker-compose will pass in env vars for credentials & port
ENTRYPOINT ["/entrypoint.sh"]
CMD []